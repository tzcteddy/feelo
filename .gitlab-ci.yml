stages:
    - install
    - build
    - deploy

cache: # ç¼“å­˜
  paths:
    - node_modules

install-job:
    stage: install
    only:
        - master
    script:
        - echo "å¼€å§‹installğŸ”¥ğŸ”¥ğŸ”¥"
        - npm config set registry https://registry.npmmirror.com
        - npm install
        - echo "å®ŒæˆinstallğŸ”¥ğŸ”¥ğŸ”¥"
    tags:
        - blog-rpi

build-job:
    stage: build
    only:
        - master
    script:
        - echo "å¼€å§‹ä»£ç æ‰“åŒ…ğŸ’ªğŸ’ªğŸ’ª"
        - npm run build
        - echo "å®Œæˆä»£ç æ‰“åŒ…ğŸ’ªğŸ’ªğŸ’ª"
    tags:
        - blog-rpi
    artifacts: 
        paths:
            - public/

deploy-job:
    stage: deploy
    only:
        - master
    script:
        - echo "å¼€å§‹éƒ¨ç½²âœ¨âœ¨âœ¨"
        - cp -rf ${CI_PROJECT_DIR}/public/* /home/gitlab-runner/www/blog/
        - echo "éƒ¨ç½²å®Œæˆâœ¨âœ¨âœ¨"
    tags:
        - blog-rpi